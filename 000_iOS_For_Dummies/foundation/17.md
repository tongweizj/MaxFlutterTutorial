#17 内存管理和自动引用计数



* 内存管理概念
内存管理就是清理（回收）不用的内存。

* 常见方法
  * 计算机机动跟踪对象
  * 自动释放
  * 混合方法：半自动的方法，系统自动作一些，程序员通知系统哪些对象不用了

* 苹果的解决方案
  - Automatic Reference Counting, AFC
* OC基本内存管理模型
  - 自动垃圾收集
  - 手动引用记数和自动释放池
  - 自动引用计算（AFC）


## 17.1 自动垃圾收集
* 概念说明
当程序执行需要空间的时候，自动释放不再被引用的对象。

* 现状 - 被淘汰
  - iOS不支持
  - 新版本OS X已经不推荐使用

##17.2 手工管理内存计数

在不能使用AFC的情况下，可以使用手工方式回收内存。

[myFraction retain]
当使用到某个对象时，给这个对象发送一个retain消息。

[myFraction release]
当不实用时，发release。

当对象引用计数为0 时，系统释放内存。

* 注意
  - Foundation框架中当某些方法会修改对象的引用计数，可加可减


### 17.2.1 对象引用和自动释放池


## 17.3 事件循环和内存分配


##17.5 自动引用计数（ARC）
